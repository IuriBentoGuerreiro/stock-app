<h2 mat-dialog-title>
  <mat-icon>shopping_cart</mat-icon>
  Registrar Venda
</h2>

<mat-dialog-content>
  <form (ngSubmit)="onSave()">
    
    <mat-form-field appearance="fill" class="full-width">
      <mat-label>Nome do Cliente</mat-label>
      <input
        matInput
        [(ngModel)]="sale.client"
        name="client"
        required
      />
    </mat-form-field>

    <mat-form-field appearance="fill" class="full-width">
      <mat-label>Quantidade</mat-label>
      <input
        matInput
        type="number"
        [(ngModel)]="sale.quantity"
        name="quantity"
        min="1"
        required
      />
    </mat-form-field>

    <mat-form-field appearance="fill" class="full-width">
      <mat-label>Produto</mat-label>
      <mat-select [(ngModel)]="sale.idProduct" name="productId" required>
        <mat-option *ngFor="let product of products" [value]="product.id">
          {{ product.name }}
        </mat-option>
      </mat-select>
    </mat-form-field>

    <div *ngIf="selectedProductDetails">
      <p><strong>Preço Unitário:</strong> R$ {{ selectedProductDetails.price }}</p>
      <p><strong>Total Estimado:</strong> R$ {{ estimatedTotal.toFixed(2) }}</p>
    </div>

    <div *ngIf="saleResponse" class="sale-summary">
      <mat-divider></mat-divider>
      <h3>Resumo da Venda</h3>
      <p><strong>Produto:</strong> {{ selectedProduct.name }}</p>
      <p><strong>Quantidade:</strong> {{ saleResponse.quantity }}</p>
      <p><strong>Total:</strong> <strong>R$ {{ saleResponse.totalPrice }}</strong></p>
    </div>
  </form>
</mat-dialog-content>

<mat-dialog-actions align="end">
  <button mat-button (click)="onCancel()">Cancelar</button>
  <button mat-flat-button (click)="onSave()" color="primary" type="submit">Salvar Venda</button>
</mat-dialog-actions>
